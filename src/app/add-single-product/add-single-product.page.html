<ion-header>
  <ion-toolbar color="grey">
    <ion-title color="primary">أضف منتج</ion-title>
    <ion-row>
      <ion-col size="1">
        <div class="header-icon">
          <ion-menu-button name="menu" color="primary"></ion-menu-button>
        </div>
      </ion-col>
      <ion-col size="9">
        <ion-searchbar placeholder="البحث"></ion-searchbar>
      </ion-col>
      <ion-col size="2">
        <div class="header-icon" routerLink="/notifications">
          <ion-badge *ngIf="countNotification > 0">{{countNotification}}</ion-badge>
          <ion-icon name="notifications" color="primary"></ion-icon>
        </div>
      </ion-col>
    </ion-row>

  </ion-toolbar>
</ion-header>

<ion-content class="add-prodImg-page" class="ion-padding">

  <ng-container *ngIf="selectImages">
    <h6>
      <ion-icon name="arrow-forward"></ion-icon>
      <ion-label>
        صور المنتج
      </ion-label>
    </h6>

    <label class="addImg" (click)="onImageNeeded()">
      <ion-icon name="photos"></ion-icon>
    </label>


    <div class="image-container new">
      <div *ngFor="let img of ProductData.images" class="new-ahmed">
        <div class="delete-icon no-padding" (click)="onDeleteImage(img)">
          <ion-icon name="close-circle-outline"></ion-icon>
        </div>
        <div class="edit-icon no-padding" (click)="onImageClicked(img)">
          <ion-icon name="md-swap"></ion-icon>
        </div>
        <img [src]="'data:image/jpeg;base64,' + img.base64" (click)="onShowImage(img)">
      </div>
    </div>

    <!-- <ion-slides pager="false" [options]="slideOpts">
      <ion-slide *ngFor="let img of ProductData.images; let i = index">
        <div class="delete-icon" (click)="onDeleteImage(img , i)">
          <ion-icon name="close-circle-outline"></ion-icon>
        </div>
        <div class="edit-icon" (click)="onImageClicked(img , i)">
          <ion-icon name="ios-create-outline
          "></ion-icon>
        </div>
        <img [src]="'data:image/jpeg;base64,' + img.base64">
      </ion-slide>
    </ion-slides> -->


    <ion-button expand="block" class="add-btn" (click)="onNextPressed()">
      <ion-icon color="light" name="arrow-dropleft-circle"></ion-icon>
      <ion-label color="light" padding>
        التالي
      </ion-label>
    </ion-button>
  </ng-container>

  <div class="add-prodInfo-page" *ngIf="!selectImages">
    <h6 class="disabled-step">
      <ion-icon name="checkmark-circle"></ion-icon>
      <ion-label>
        صور المنتج
      </ion-label>
    </h6>
    <ion-slides pager="false" [options]="slideOpts">
      <ion-slide *ngFor="let img of ProductData.images; let i = index">
        <div class="delete-icon" (click)="onDeleteImage(img)">
          <ion-icon name="close-circle-outline"></ion-icon>
        </div>
        <div class="edit-icon" (click)="onImageClicked(img)">
          <ion-icon name="md-swap"></ion-icon>
        </div>
        <img [src]="'data:image/jpeg;base64,' + img.base64" (click)="onShowImage(img)">
        <!-- <ion-button class="remove-button" color="light" > 
                    <ion-icon name="trash" ></ion-icon>
                </ion-button> -->
      </ion-slide>
    </ion-slides>
    <h6>
      <ion-icon name="arrow-forward"></ion-icon>
      <ion-label>
        معلومات المنتج
      </ion-label>
    </h6>
    <form [formGroup]="ProductForm" novalidate (submit)="onCreatePressed()">
      <div class="form-container">
        <ion-list lines="none" color="none">

          <ion-item color="none">
            <ion-label position="stacked">اسم المنتج</ion-label>
            <ion-input placeholder="إسم المنتج" type="text" name="name" formControlName="name"
              [(ngModel)]="ProductData.name"></ion-input>
          </ion-item>
          <div class="error-box"
            *ngIf="ProductForm.controls['name'].hasError('required') && ProductForm.controls['name'].touched">
            اسم المنتج مطلوب* </div>
          <ion-item>
            <ion-label position="stacked">التصنيف</ion-label>
            <ion-select placeholder="أختر تصنيف" name="category_id" formControlName="category_id"
              [(ngModel)]="ProductData.category_id" (ionChange)="catChange(ProductData.category_id)">
              <ion-select-option *ngFor="let cat of categories" [value]="cat.id"> {{cat.name}} </ion-select-option>
            </ion-select>
          </ion-item>
          <div class="error-box"
            *ngIf="ProductForm.controls['category_id'].hasError('required') && ProductForm.controls['category_id'].touched">
            اسم التصنيف مطلوب* </div>
          <ion-item color="none" (click)="onCategoryClicked()">
            <ion-label position="stacked"> الفئه , الفئه الفرعيه </ion-label>
            <ion-input placeholder="ادخل الفئة والفئة الفرعية" type="text" name="cat_sub_title"
              formControlName="cat_sub_title" [(ngModel)]="cat_sub_title"></ion-input>
          </ion-item>
          <div class="error-box"
            *ngIf="ProductForm.controls['cat_sub_title'].hasError('required') && ProductForm.controls['cat_sub_title'].touched">
            الفئه والفئه الفرعيه مطلوب* </div>
          <ion-item color="none">
            <ion-label position="stacked">السعر</ion-label>
            <ion-input placeholder="0" type="number" name="selling_price" formControlName="selling_price"
              [(ngModel)]="ProductData.selling_price"></ion-input>
          </ion-item>
          <div class="error-box"
            *ngIf="ProductForm.controls['selling_price'].hasError('required') && ProductForm.controls['selling_price'].touched">
            السعر مطلوب* </div>
          <!-- <ion-item color="none">
            <ion-label position="stacked">السعر بعد الخصم</ion-label>
            <ion-input placeholder="400" type="number" name="price_after" formControlName="price_after"
              [(ngModel)]="ProductData.price_after"></ion-input>
          </ion-item> -->
          <!-- <div class="error-box"
            *ngIf="ProductForm.controls['price_after'].hasError('required') && ProductForm.controls['price_after'].touched">
            السعر بعد الخصم مطلوب* </div> -->

          <ion-item color="none">
            <ion-label position="stacked">وصف المنتج</ion-label>
            <ion-textarea rows="5" placeholder="أدخل وصف المنتج هنا ..." name="description"
              formControlName="description" [(ngModel)]="ProductData.description"></ion-textarea>
          </ion-item>
          <div class="error-box"
            *ngIf="ProductForm.controls['description'].hasError('required') && ProductForm.controls['description'].touched">
            الوصف مطلوب* </div>

          <ion-item color="none" class="options-button" (click)="OnCustomizeClicked()">
            <ion-button color="light" slot="end">
              <ion-icon slot="end" name="arrow-forward"></ion-icon>
              اختياري
            </ion-button>
            <ion-text>
              تخصيص المنتج
            </ion-text>
          </ion-item>
          <div>
            <div class="progress-bar-custom text-center" *ngIf="showProgress">
              <p>من فضلك انتظر قليلا </p>
              <p>جاري التحميل </p>
              <ion-progress-bar style="height:20px" value="{{progress/100}}"></ion-progress-bar>
            </div>
          </div>
          <ion-button expand="block" class="add-btn" type="submit">
            <ion-icon color="light" name="arrow-dropleft-circle"></ion-icon>
            <ion-label color="light" padding>
              اضافه الان
            </ion-label>
          </ion-button>


        </ion-list>
      </div>
    </form>
  </div>


</ion-content>